<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <meta name="description" content="SIE Exam Simulation - Practice with realistic FINRA-style questions">

    <title>SIE Exam Simulation | Franklin Hugh Money</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;500;600&family=Inter:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --fh-navy: #002D62;
            --fh-cream: #FFFDF7;
            --fh-gray: #54585A;
            --fh-sage: #7C9885;
            --fh-burgundy: #6B2737;
            --fh-gold: #B08D57;
            --fh-gray-900: #1A1A1A;
            --fh-gray-700: #404040;
            --fh-gray-600: #595959;
            --fh-gray-500: #737373;
            --fh-gray-400: #8a8a8a;
            --fh-gray-300: #D4D4D4;
            --fh-gray-200: #E5E5E5;
            --fh-gray-100: #F5F5F5;
            --fh-white: #FFFFFF;
            --fh-font-display: 'Crimson Pro', Georgia, serif;
            --fh-font-body: 'Inter', -apple-system, sans-serif;
            --fh-font-mono: 'IBM Plex Mono', monospace;
            --fh-space-xs: 0.25rem;
            --fh-space-sm: 0.5rem;
            --fh-space-md: 1rem;
            --fh-space-lg: 1.5rem;
            --fh-space-xl: 2rem;
            --fh-space-2xl: 3rem;
            --fh-space-3xl: 4rem;
            --fh-correct: #10B981;
            --fh-incorrect: #EF4444;
            --fh-warning: #F59E0B;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--fh-font-body);
            font-size: 16px;
            line-height: 1.75;
            color: var(--fh-gray-900);
            background: var(--fh-cream);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--fh-space-xl);
        }

        /* Header */
        .exam-header {
            background: linear-gradient(135deg, var(--fh-navy) 0%, #001a3d 100%);
            color: var(--fh-white);
            padding: var(--fh-space-xl) 0;
        }

        .exam-header__inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--fh-space-md);
        }

        .exam-header__title {
            font-family: var(--fh-font-display);
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--fh-white);
        }

        .exam-header__badge {
            background: var(--fh-burgundy);
            padding: var(--fh-space-xs) var(--fh-space-md);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .exam-header__nav {
            display: flex;
            gap: var(--fh-space-lg);
        }

        .exam-header__nav a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: color 0.2s;
        }

        .exam-header__nav a:hover,
        .exam-header__nav a.active {
            color: var(--fh-white);
        }

        /* Timer Bar */
        .timer-bar {
            background: var(--fh-white);
            border-bottom: 1px solid var(--fh-gray-200);
            padding: var(--fh-space-md) 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .timer-bar__inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--fh-space-sm);
        }

        .timer-bar__left {
            display: flex;
            align-items: center;
            gap: var(--fh-space-lg);
        }

        .timer-bar__progress {
            font-family: var(--fh-font-mono);
            font-size: 0.875rem;
            color: var(--fh-gray-600);
        }

        .timer-bar__time {
            font-family: var(--fh-font-mono);
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--fh-navy);
            display: flex;
            align-items: center;
            gap: var(--fh-space-sm);
        }

        .timer-bar__time.warning {
            color: var(--fh-warning);
        }

        .timer-bar__time.danger {
            color: var(--fh-incorrect);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .timer-bar__actions {
            display: flex;
            gap: var(--fh-space-sm);
        }

        .btn-flag {
            background: var(--fh-gray-100);
            border: 1px solid var(--fh-gray-300);
            padding: var(--fh-space-sm) var(--fh-space-md);
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-flag:hover {
            background: var(--fh-warning);
            color: var(--fh-white);
            border-color: var(--fh-warning);
        }

        .btn-flag.flagged {
            background: var(--fh-warning);
            color: var(--fh-white);
            border-color: var(--fh-warning);
        }

        .progress-track {
            height: 4px;
            background: var(--fh-gray-200);
            border-radius: 2px;
            margin-top: var(--fh-space-sm);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--fh-navy);
            transition: width 0.3s ease;
        }

        /* Start Screen */
        .start-screen {
            padding: var(--fh-space-3xl) 0;
            text-align: center;
        }

        .start-screen h1 {
            font-family: var(--fh-font-display);
            font-size: 2.5rem;
            color: var(--fh-navy);
            margin-bottom: var(--fh-space-md);
        }

        .start-screen__subtitle {
            font-size: 1.125rem;
            color: var(--fh-gray-600);
            margin-bottom: var(--fh-space-2xl);
        }

        .exam-info {
            background: var(--fh-white);
            border-radius: 12px;
            padding: var(--fh-space-xl);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: var(--fh-space-2xl);
            text-align: left;
        }

        .exam-info h3 {
            font-family: var(--fh-font-display);
            font-size: 1.25rem;
            color: var(--fh-navy);
            margin-bottom: var(--fh-space-lg);
        }

        .exam-info__grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--fh-space-lg);
        }

        .exam-info__item {
            display: flex;
            align-items: center;
            gap: var(--fh-space-md);
        }

        .exam-info__icon {
            width: 40px;
            height: 40px;
            background: rgba(0, 45, 98, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .exam-info__text strong {
            display: block;
            color: var(--fh-navy);
        }

        .exam-info__text span {
            font-size: 0.875rem;
            color: var(--fh-gray-600);
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--fh-warning);
            border-radius: 8px;
            padding: var(--fh-space-lg);
            margin-bottom: var(--fh-space-2xl);
            text-align: left;
        }

        .warning-box h4 {
            color: var(--fh-warning);
            margin-bottom: var(--fh-space-sm);
        }

        .warning-box p {
            font-size: 0.9rem;
            color: var(--fh-gray-700);
        }

        .start-btn {
            background: var(--fh-navy);
            color: var(--fh-white);
            border: none;
            padding: var(--fh-space-md) var(--fh-space-2xl);
            border-radius: 8px;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        .start-btn:hover {
            background: #003d82;
            transform: translateY(-2px);
        }

        /* Exam Screen */
        .exam-screen {
            display: none;
            padding: var(--fh-space-2xl) 0 var(--fh-space-3xl);
        }

        .question-card {
            background: var(--fh-white);
            border-radius: 12px;
            padding: var(--fh-space-xl);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .question-number {
            font-family: var(--fh-font-mono);
            font-size: 0.875rem;
            color: var(--fh-gray-500);
            margin-bottom: var(--fh-space-lg);
        }

        .question-text {
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--fh-gray-900);
            line-height: 1.6;
            margin-bottom: var(--fh-space-xl);
        }

        .answers-list {
            display: flex;
            flex-direction: column;
            gap: var(--fh-space-md);
        }

        .answer-btn {
            background: var(--fh-gray-100);
            border: 2px solid transparent;
            border-radius: 8px;
            padding: var(--fh-space-md) var(--fh-space-lg);
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
            color: var(--fh-gray-700);
            display: flex;
            align-items: flex-start;
            gap: var(--fh-space-md);
        }

        .answer-btn:hover:not(:disabled) {
            background: var(--fh-white);
            border-color: var(--fh-navy);
        }

        .answer-btn.selected {
            background: rgba(0, 45, 98, 0.08);
            border-color: var(--fh-navy);
        }

        .answer-btn.correct {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--fh-correct);
        }

        .answer-btn.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--fh-incorrect);
        }

        .answer-btn.was-correct {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--fh-correct);
        }

        .answer-letter {
            font-family: var(--fh-font-mono);
            font-weight: 600;
            color: var(--fh-navy);
            flex-shrink: 0;
            width: 24px;
        }

        .answer-btn.correct .answer-letter,
        .answer-btn.was-correct .answer-letter {
            color: var(--fh-correct);
        }

        .answer-btn.incorrect .answer-letter {
            color: var(--fh-incorrect);
        }

        /* Navigation */
        .exam-nav {
            display: flex;
            justify-content: space-between;
            margin-top: var(--fh-space-xl);
            gap: var(--fh-space-md);
        }

        .nav-btn {
            background: var(--fh-gray-100);
            color: var(--fh-gray-700);
            border: 1px solid var(--fh-gray-300);
            padding: var(--fh-space-md) var(--fh-space-xl);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--fh-gray-200);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.primary {
            background: var(--fh-navy);
            color: var(--fh-white);
            border-color: var(--fh-navy);
        }

        .nav-btn.primary:hover:not(:disabled) {
            background: #003d82;
        }

        .nav-btn.submit {
            background: var(--fh-burgundy);
            color: var(--fh-white);
            border-color: var(--fh-burgundy);
        }

        .nav-btn.submit:hover:not(:disabled) {
            background: #8a3347;
        }

        /* Question Grid */
        .question-grid {
            display: none;
            background: var(--fh-white);
            border-radius: 12px;
            padding: var(--fh-space-xl);
            margin-top: var(--fh-space-xl);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .question-grid.show {
            display: block;
        }

        .question-grid h3 {
            font-family: var(--fh-font-display);
            font-size: 1.25rem;
            color: var(--fh-navy);
            margin-bottom: var(--fh-space-lg);
        }

        .grid-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: var(--fh-space-sm);
        }

        .grid-btn {
            aspect-ratio: 1;
            border: 1px solid var(--fh-gray-300);
            background: var(--fh-white);
            border-radius: 6px;
            font-family: var(--fh-font-mono);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .grid-btn:hover {
            border-color: var(--fh-navy);
        }

        .grid-btn.current {
            background: var(--fh-navy);
            color: var(--fh-white);
            border-color: var(--fh-navy);
        }

        .grid-btn.answered {
            background: var(--fh-gray-200);
        }

        .grid-btn.flagged {
            background: var(--fh-warning);
            color: var(--fh-white);
            border-color: var(--fh-warning);
        }

        .grid-legend {
            display: flex;
            gap: var(--fh-space-lg);
            margin-top: var(--fh-space-lg);
            font-size: 0.875rem;
            color: var(--fh-gray-600);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--fh-space-sm);
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .legend-dot.current { background: var(--fh-navy); }
        .legend-dot.answered { background: var(--fh-gray-300); }
        .legend-dot.flagged { background: var(--fh-warning); }

        /* Results Screen */
        .results-screen {
            display: none;
            padding: var(--fh-space-3xl) 0;
        }

        .results-card {
            background: var(--fh-white);
            border-radius: 12px;
            padding: var(--fh-space-2xl);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            text-align: center;
            margin-bottom: var(--fh-space-2xl);
        }

        .results-badge {
            display: inline-block;
            padding: var(--fh-space-sm) var(--fh-space-lg);
            border-radius: 20px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.875rem;
            margin-bottom: var(--fh-space-lg);
        }

        .results-badge.pass {
            background: rgba(16, 185, 129, 0.1);
            color: var(--fh-correct);
        }

        .results-badge.fail {
            background: rgba(239, 68, 68, 0.1);
            color: var(--fh-incorrect);
        }

        .results-score {
            font-family: var(--fh-font-display);
            font-size: 4rem;
            font-weight: 600;
            margin-bottom: var(--fh-space-sm);
        }

        .results-score.pass { color: var(--fh-correct); }
        .results-score.fail { color: var(--fh-incorrect); }

        .results-label {
            font-size: 1.25rem;
            color: var(--fh-gray-600);
            margin-bottom: var(--fh-space-lg);
        }

        .results-breakdown {
            display: flex;
            justify-content: center;
            gap: var(--fh-space-2xl);
            padding: var(--fh-space-lg) 0;
            border-top: 1px solid var(--fh-gray-200);
        }

        .results-stat {
            text-align: center;
        }

        .results-stat__value {
            font-size: 2rem;
            font-weight: 600;
        }

        .results-stat__value.correct { color: var(--fh-correct); }
        .results-stat__value.incorrect { color: var(--fh-incorrect); }

        .results-stat__label {
            font-size: 0.875rem;
            color: var(--fh-gray-500);
        }

        .results-time {
            margin-top: var(--fh-space-lg);
            font-family: var(--fh-font-mono);
            color: var(--fh-gray-600);
        }

        /* Review Section */
        .review-section {
            background: var(--fh-white);
            border-radius: 12px;
            padding: var(--fh-space-xl);
            margin-bottom: var(--fh-space-xl);
        }

        .review-section h3 {
            font-family: var(--fh-font-display);
            font-size: 1.5rem;
            color: var(--fh-navy);
            margin-bottom: var(--fh-space-lg);
        }

        .review-tabs {
            display: flex;
            gap: var(--fh-space-sm);
            margin-bottom: var(--fh-space-xl);
            border-bottom: 1px solid var(--fh-gray-200);
            padding-bottom: var(--fh-space-md);
        }

        .review-tab {
            background: none;
            border: none;
            padding: var(--fh-space-sm) var(--fh-space-lg);
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--fh-gray-600);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .review-tab:hover {
            background: var(--fh-gray-100);
        }

        .review-tab.active {
            background: var(--fh-navy);
            color: var(--fh-white);
        }

        .review-question {
            border: 1px solid var(--fh-gray-200);
            border-radius: 8px;
            padding: var(--fh-space-lg);
            margin-bottom: var(--fh-space-lg);
        }

        .review-question.correct {
            border-left: 4px solid var(--fh-correct);
        }

        .review-question.incorrect {
            border-left: 4px solid var(--fh-incorrect);
        }

        .review-question__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--fh-space-md);
        }

        .review-question__number {
            font-family: var(--fh-font-mono);
            font-size: 0.875rem;
            color: var(--fh-gray-500);
        }

        .review-question__status {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: var(--fh-space-xs) var(--fh-space-sm);
            border-radius: 4px;
        }

        .review-question__status.correct {
            background: rgba(16, 185, 129, 0.1);
            color: var(--fh-correct);
        }

        .review-question__status.incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: var(--fh-incorrect);
        }

        .review-question__text {
            font-weight: 500;
            margin-bottom: var(--fh-space-md);
        }

        .review-answers {
            font-size: 0.9rem;
        }

        .review-answer {
            padding: var(--fh-space-sm) 0;
            display: flex;
            gap: var(--fh-space-sm);
        }

        .review-answer.your-answer {
            color: var(--fh-incorrect);
        }

        .review-answer.correct-answer {
            color: var(--fh-correct);
            font-weight: 600;
        }

        .review-explanation {
            margin-top: var(--fh-space-md);
            padding: var(--fh-space-md);
            background: var(--fh-gray-100);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--fh-gray-700);
        }

        .restart-btn {
            background: var(--fh-navy);
            color: var(--fh-white);
            border: none;
            padding: var(--fh-space-md) var(--fh-space-2xl);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .restart-btn:hover {
            background: #003d82;
        }

        /* Responsive */
        @media (max-width: 640px) {
            .exam-header__inner {
                flex-direction: column;
                text-align: center;
            }

            .timer-bar__inner {
                flex-direction: column;
            }

            .exam-nav {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
            }
        }
        /* Night Mode Overrides (5pm - 9am) */
        body.night-mode {
            --fh-navy: #4A90C2;
            --fh-cream: #1a1f2e;
            --fh-gray: #9CA3AF;
            --fh-sage: #8FB89A;
            --fh-burgundy: #C77A8A;
            --fh-gold: #D4A85A;
            --fh-gray-900: #F5F5F5;
            --fh-gray-700: #E5E5E5;
            --fh-gray-600: #D4D4D4;
            --fh-gray-500: #9CA3AF;
            --fh-gray-400: #6B7280;
            --fh-gray-300: #4B5563;
            --fh-gray-200: #374151;
            --fh-gray-100: #252d3d;
            --fh-white: #1e2536;
        }
    </style>
    <!-- Night Mode (5pm - 9am) -->
    <script src="../../assets/js/night-mode.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="exam-header">
        <div class="container">
            <div class="exam-header__inner">
                <div style="display: flex; align-items: center; gap: var(--fh-space-md);">
                    <h1 class="exam-header__title">SIE Exam Simulation</h1>
                    <span class="exam-header__badge">FINRA-Style</span>
                </div>
                <nav class="exam-header__nav">
                    <a href="sie-study-materials.html">Study Materials</a>
                    <a href="sie-quiz.html">Quiz Drill</a>
                    <a href="sie-practice-exam.html">Practice Exam</a>
                    <a href="#" class="active">Exam Sim</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Timer Bar (hidden until exam starts) -->
    <div class="timer-bar" id="timerBar" style="display: none;">
        <div class="container">
            <div class="timer-bar__inner">
                <div class="timer-bar__left">
                    <span class="timer-bar__progress">Question <span id="currentQ">1</span> of <span id="totalQ">75</span></span>
                    <div class="timer-bar__time" id="timerDisplay">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <span id="timeRemaining">1:45:00</span>
                    </div>
                </div>
                <div class="timer-bar__actions">
                    <button type="button" class="btn-flag" id="flagBtn" title="Flag for review">Flag</button>
                    <button type="button" class="nav-btn" id="gridToggle">Question Grid</button>
                </div>
            </div>
            <div class="progress-track">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <div class="container">
            <h1>SIE Exam Simulation</h1>
            <p class="start-screen__subtitle">Test yourself with realistic FINRA-style questions</p>

            <div class="exam-info">
                <h3>Exam Parameters</h3>
                <div class="exam-info__grid">
                    <div class="exam-info__item">
                        <div class="exam-info__icon">75</div>
                        <div class="exam-info__text">
                            <strong>Questions</strong>
                            <span>Multiple choice</span>
                        </div>
                    </div>
                    <div class="exam-info__item">
                        <div class="exam-info__icon">105</div>
                        <div class="exam-info__text">
                            <strong>Minutes</strong>
                            <span>1 hour 45 min</span>
                        </div>
                    </div>
                    <div class="exam-info__item">
                        <div class="exam-info__icon">70%</div>
                        <div class="exam-info__text">
                            <strong>Passing Score</strong>
                            <span>53 of 75 correct</span>
                        </div>
                    </div>
                    <div class="exam-info__item">
                        <div class="exam-info__icon">4</div>
                        <div class="exam-info__text">
                            <strong>Topic Areas</strong>
                            <span>Weighted like real exam</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <h4>Exam Simulation Mode</h4>
                <p>This simulation uses <strong>FINRA-style questions</strong> that mirror the actual SIE exam format. Questions include complex scenarios, EXCEPT-style questions, calculations, and close answer choices designed to test true understanding. Timer is enforced. Good luck!</p>
            </div>

            <button type="button" class="start-btn" id="startBtn">Begin Exam</button>
        </div>
    </div>

    <!-- Exam Screen -->
    <div class="exam-screen" id="examScreen">
        <div class="container">
            <div class="question-card">
                <div class="question-number" id="questionNumber">Question 1 of 75</div>
                <p class="question-text" id="questionText">Loading question...</p>
                <div class="answers-list" id="answersList">
                    <!-- Answers populated by JS -->
                </div>
            </div>

            <div class="exam-nav">
                <button type="button" class="nav-btn" id="prevBtn" disabled>Previous</button>
                <button type="button" class="nav-btn primary" id="nextBtn">Next</button>
                <button type="button" class="nav-btn submit" id="submitBtn" style="display: none;">Submit Exam</button>
            </div>

            <div class="question-grid" id="questionGrid">
                <h3>Question Navigator</h3>
                <div class="grid-buttons" id="gridButtons">
                    <!-- Grid buttons populated by JS -->
                </div>
                <div class="grid-legend">
                    <div class="legend-item"><div class="legend-dot current"></div> Current</div>
                    <div class="legend-item"><div class="legend-dot answered"></div> Answered</div>
                    <div class="legend-item"><div class="legend-dot flagged"></div> Flagged</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div class="results-screen" id="resultsScreen">
        <div class="container">
            <div class="results-card">
                <div class="results-badge" id="resultsBadge">PASS</div>
                <div class="results-score" id="finalScore">72%</div>
                <div class="results-label">Final Score</div>
                <div class="results-breakdown">
                    <div class="results-stat">
                        <div class="results-stat__value correct" id="finalCorrect">54</div>
                        <div class="results-stat__label">Correct</div>
                    </div>
                    <div class="results-stat">
                        <div class="results-stat__value incorrect" id="finalIncorrect">21</div>
                        <div class="results-stat__label">Incorrect</div>
                    </div>
                </div>
                <div class="results-time" id="resultsTime">Time: 1:23:45</div>
            </div>

            <div class="review-section">
                <h3>Review Your Answers</h3>
                <div class="review-tabs">
                    <button type="button" class="review-tab active" data-filter="all">All Questions</button>
                    <button type="button" class="review-tab" data-filter="incorrect">Incorrect Only</button>
                    <button type="button" class="review-tab" data-filter="flagged">Flagged</button>
                </div>
                <div id="reviewList">
                    <!-- Review items populated by JS -->
                </div>
            </div>

            <div style="text-align: center;">
                <button type="button" class="restart-btn" id="restartBtn">Take New Exam</button>
            </div>
        </div>
    </div>

    <script>
        // FINRA-Style Question Bank - 75 Realistic Exam Questions
        const examQuestions = [
            // ========== KNOWLEDGE OF CAPITAL MARKETS (16%) - 12 Questions ==========
            {
                id: 1,
                question: "A company is conducting an initial public offering (IPO). During the cooling-off period, which of the following activities is PERMITTED?",
                answers: [
                    "Accepting indications of interest from potential investors",
                    "Confirming sales and collecting payments",
                    "Distributing the final prospectus to customers",
                    "Guaranteeing allocation of shares to preferred clients"
                ],
                correct: 0,
                explanation: "During the cooling-off period (between filing and effective date), firms may only accept indications of interest - not actual orders or payments. The red herring prospectus can be distributed, but sales cannot be confirmed until the registration becomes effective."
            },
            {
                id: 2,
                question: "An investor purchases a corporate bond at 97.50. At maturity, the investor will receive:",
                answers: [
                    "$975.00 plus accrued interest",
                    "$1,000.00 regardless of purchase price",
                    "$975.00 only",
                    "$1,000.00 minus accrued interest"
                ],
                correct: 1,
                explanation: "Bonds mature at par value ($1,000) regardless of the purchase price. The investor bought at a discount (97.50 = $975), but will receive the full $1,000 at maturity. The difference represents additional yield (capital gain) to the investor."
            },
            {
                id: 3,
                question: "In a best efforts underwriting, all of the following are TRUE except:",
                answers: [
                    "The underwriter acts as agent for the issuer",
                    "Unsold shares are returned to the issuer",
                    "The underwriter guarantees the issuer will receive the proceeds",
                    "The underwriter receives a fee for shares sold"
                ],
                correct: 2,
                explanation: "In a best efforts underwriting, there is NO guarantee to the issuer. The underwriter acts as agent, sells what they can, returns unsold shares, and only earns fees on shares actually sold. Firm commitment underwriting provides the guarantee."
            },
            {
                id: 4,
                question: "The Federal Reserve announces a 25 basis point increase in the federal funds rate. Which of the following is the MOST LIKELY immediate effect?",
                answers: [
                    "Stock prices will increase due to higher corporate earnings expectations",
                    "Long-term bond prices will decrease more than short-term bond prices",
                    "The value of the U.S. dollar will decrease against foreign currencies",
                    "Money market fund yields will remain unchanged"
                ],
                correct: 1,
                explanation: "When the Fed raises rates, bond prices fall (inverse relationship). Long-term bonds have greater duration and are more sensitive to rate changes than short-term bonds, so they experience larger price declines. This is a fundamental concept of interest rate risk."
            },
            {
                id: 5,
                question: "A broker-dealer is acting as a market maker in XYZ stock. The firm's quote is 25.50 - 25.75. A customer enters a market order to sell 500 shares. At what price will the order be executed?",
                answers: [
                    "$25.50 (the bid price)",
                    "$25.75 (the ask price)",
                    "$25.625 (the midpoint)",
                    "The price cannot be determined without knowing the current market"
                ],
                correct: 0,
                explanation: "When a customer sells, they sell at the BID price (what the dealer is willing to pay). When a customer buys, they pay the ASK price. The bid-ask spread ($0.25 in this case) represents the market maker's profit."
            },
            {
                id: 6,
                question: "Which of the following securities would be EXEMPT from registration under the Securities Act of 1933?",
                answers: [
                    "Common stock of a Fortune 500 company",
                    "Municipal general obligation bonds",
                    "Corporate bonds rated BBB by S&P",
                    "American Depositary Receipts (ADRs)"
                ],
                correct: 1,
                explanation: "Municipal securities are exempt from SEC registration under the Securities Act of 1933. Other exempt securities include U.S. government securities, bank securities, and commercial paper (under certain conditions). Corporate securities must register regardless of rating."
            },
            {
                id: 7,
                question: "An investor in the 32% federal tax bracket is comparing a 4.5% municipal bond to a corporate bond. What taxable equivalent yield must the corporate bond offer to be equivalent?",
                answers: [
                    "5.94%",
                    "6.62%",
                    "6.25%",
                    "4.86%"
                ],
                correct: 1,
                explanation: "Tax-Equivalent Yield = Municipal Yield / (1 - Tax Rate). 4.5% / (1 - 0.32) = 4.5% / 0.68 = 6.62%. The corporate bond must yield 6.62% to equal the after-tax return of the 4.5% municipal bond."
            },
            {
                id: 8,
                question: "The third market refers to:",
                answers: [
                    "Trading of unlisted securities between dealers",
                    "Trading of exchange-listed securities in the OTC market",
                    "Direct trading between institutional investors without broker-dealers",
                    "Trading of municipal securities"
                ],
                correct: 1,
                explanation: "The third market is the trading of exchange-listed securities in the OTC market. The fourth market is direct institutional trading. The first market is exchange trading, and the second market is OTC trading of unlisted securities."
            },
            {
                id: 9,
                question: "Which of the following has the GREATEST reinvestment risk?",
                answers: [
                    "A 30-year zero-coupon bond",
                    "A 30-year bond with a 7% coupon",
                    "A 5-year bond with a 7% coupon",
                    "A 5-year Treasury bill"
                ],
                correct: 1,
                explanation: "A 30-year bond with a 7% coupon has the highest reinvestment risk because it pays the most coupons over the longest period. Zero-coupon bonds have NO reinvestment risk (no coupons). T-bills are short-term with no coupons."
            },
            {
                id: 10,
                question: "An investor purchases 100 shares of XYZ at $50 per share using the maximum margin allowed under Regulation T. If XYZ rises to $70, the investor's equity is:",
                answers: [
                    "$2,500",
                    "$4,500",
                    "$5,000",
                    "$7,000"
                ],
                correct: 1,
                explanation: "Initial purchase: 100 shares × $50 = $5,000. With 50% Reg T margin, investor deposits $2,500, borrows $2,500. At $70: Market Value = $7,000. Equity = Market Value - Debit Balance = $7,000 - $2,500 = $4,500."
            },
            {
                id: 11,
                question: "A customer has a margin account with the following: Market value $40,000, Debit balance $15,000. What is the customer's SMA (Special Memorandum Account) if Regulation T is 50%?",
                answers: [
                    "$0",
                    "$5,000",
                    "$10,000",
                    "$25,000"
                ],
                correct: 1,
                explanation: "Equity = $40,000 - $15,000 = $25,000. Required equity at 50% Reg T = $40,000 × 50% = $20,000. Excess equity = $25,000 - $20,000 = $5,000. SMA = $5,000 (excess equity available for buying power)."
            },
            {
                id: 12,
                question: "All of the following are characteristics of commercial paper EXCEPT:",
                answers: [
                    "It is issued at a discount",
                    "Maximum maturity is 270 days",
                    "It is typically secured by corporate assets",
                    "It is exempt from SEC registration"
                ],
                correct: 2,
                explanation: "Commercial paper is UNSECURED short-term corporate debt. It's issued at a discount, has max maturity of 270 days (to avoid SEC registration), and is exempt from registration. Only highly-rated corporations can issue CP because it's unsecured."
            },

            // ========== UNDERSTANDING PRODUCTS AND THEIR RISKS (44%) - 33 Questions ==========
            {
                id: 13,
                question: "An investor owns a convertible bond with a conversion ratio of 40. If the bond is trading at $1,100 and the underlying stock is at $25, what is the conversion premium?",
                answers: [
                    "10%",
                    "9.09%",
                    "15%",
                    "4.55%"
                ],
                correct: 0,
                explanation: "Conversion value = 40 shares × $25 = $1,000. Premium = (Bond Price - Conversion Value) / Conversion Value = ($1,100 - $1,000) / $1,000 = 10%. The bond trades at a 10% premium to its conversion value."
            },
            {
                id: 14,
                question: "Which of the following statements about American Depositary Receipts (ADRs) is FALSE?",
                answers: [
                    "ADRs trade in U.S. dollars on U.S. exchanges",
                    "ADR holders are exposed to currency exchange risk",
                    "ADR dividends are exempt from foreign withholding taxes",
                    "ADRs represent shares of foreign companies held by U.S. banks"
                ],
                correct: 2,
                explanation: "ADR dividends are NOT exempt from foreign withholding taxes. Foreign countries typically withhold taxes on dividends before they're paid to ADR holders. Investors may receive a foreign tax credit but are still subject to the withholding."
            },
            {
                id: 15,
                question: "A municipal bond has a 5% coupon and is callable at 102 in 5 years. The bond is currently trading at 108. Which yield will be LOWEST?",
                answers: [
                    "Nominal yield",
                    "Current yield",
                    "Yield to maturity",
                    "Yield to call"
                ],
                correct: 3,
                explanation: "For a premium bond, yields from lowest to highest: YTC < YTM < CY < Nominal. The bond trades at a premium (108), so if called early at 102, the investor loses more premium faster, resulting in the lowest yield to call."
            },
            {
                id: 16,
                question: "An investor writes an uncovered call option. All of the following describe this position EXCEPT:",
                answers: [
                    "Maximum gain is limited to the premium received",
                    "The position is bearish or neutral on the underlying stock",
                    "Maximum loss is unlimited",
                    "The investor has a right to buy the underlying stock"
                ],
                correct: 3,
                explanation: "An option WRITER has an OBLIGATION, not a right. The uncovered call writer is obligated to SELL (not buy) shares if assigned. The buyer has rights; the writer has obligations. This is a fundamental options concept."
            },
            {
                id: 17,
                question: "An investor purchases 1 XYZ Dec 60 call at 4 and writes 1 XYZ Dec 70 call at 1.50. What is the maximum profit potential?",
                answers: [
                    "$250",
                    "$750",
                    "$1,000",
                    "Unlimited"
                ],
                correct: 1,
                explanation: "This is a bull call spread. Max profit = difference between strikes - net premium paid. Strikes differ by $10 = $1,000. Net premium = $4 - $1.50 = $2.50 = $250. Max profit = $1,000 - $250 = $750."
            },
            {
                id: 18,
                question: "An investor owns 100 shares of ABC stock at $50 and writes an ABC 55 call for $3. If the stock is at $60 at expiration and the call is exercised, what is the investor's total profit?",
                answers: [
                    "$300",
                    "$500",
                    "$800",
                    "$1,000"
                ],
                correct: 2,
                explanation: "Stock appreciation: $55 - $50 = $5 × 100 = $500 (capped at strike). Premium received: $3 × 100 = $300. Total profit = $500 + $300 = $800. The stock went to $60, but the investor only gets $55 because the call was exercised."
            },
            {
                id: 19,
                question: "Which of the following options strategies provides the MOST downside protection for a stock portfolio?",
                answers: [
                    "Buying calls",
                    "Writing covered calls",
                    "Buying puts",
                    "Writing naked puts"
                ],
                correct: 2,
                explanation: "Buying puts provides the most downside protection - you have the right to sell at the strike price no matter how low the stock goes. Covered calls provide limited protection (premium only). Naked puts and long calls don't protect existing positions."
            },
            {
                id: 20,
                question: "A mutual fund has a NAV of $25.00 and a POP of $26.50. The sales load is:",
                answers: [
                    "5.66%",
                    "6.00%",
                    "6.38%",
                    "1.50%"
                ],
                correct: 0,
                explanation: "Sales Load % = (POP - NAV) / POP = ($26.50 - $25.00) / $26.50 = $1.50 / $26.50 = 5.66%. Note: Load is calculated on POP (what you pay), not NAV. This is a common exam trap."
            },
            {
                id: 21,
                question: "An investor has $100,000 to invest in Class A shares with a 5% front-end load. A breakpoint at $100,000 reduces the load to 4%. Without informing the investor of the breakpoint, the registered representative sells $99,000 of shares. This is an example of:",
                answers: [
                    "Churning",
                    "Breakpoint selling",
                    "Free-riding",
                    "Best execution"
                ],
                correct: 1,
                explanation: "Breakpoint selling is selling just below a breakpoint to avoid giving the customer a discount. This is a serious violation. The rep should have informed the investor about the $100,000 breakpoint and the available discount."
            },
            {
                id: 22,
                question: "All of the following are characteristics of closed-end funds EXCEPT:",
                answers: [
                    "They trade on exchanges throughout the day",
                    "They can trade at a premium or discount to NAV",
                    "They issue a fixed number of shares",
                    "They must redeem shares at NAV within 7 days"
                ],
                correct: 3,
                explanation: "OPEN-end funds must redeem at NAV within 7 days. CLOSED-end funds have a fixed number of shares trading on exchanges and don't redeem shares - investors sell on the secondary market. They often trade at discounts to NAV."
            },
            {
                id: 23,
                question: "An investor in an equity mutual fund receives a capital gains distribution. For tax purposes, this distribution is:",
                answers: [
                    "Taxed as ordinary income regardless of holding period",
                    "Tax-free if reinvested in additional shares",
                    "Taxed based on the fund's holding period, not the investor's",
                    "Taxed as a return of principal"
                ],
                correct: 2,
                explanation: "Capital gains distributions are taxed based on the FUND'S holding period (long-term vs short-term), not the investor's. Even if you just bought the fund yesterday, you pay taxes on distributions at the fund's rate. Reinvesting doesn't avoid taxes."
            },
            {
                id: 24,
                question: "Which of the following investments would be LEAST suitable for an IRA account?",
                answers: [
                    "Growth stocks",
                    "Corporate bonds",
                    "Municipal bonds",
                    "Real estate investment trusts (REITs)"
                ],
                correct: 2,
                explanation: "Municipal bonds are LEAST suitable for IRAs because their tax-exempt feature is wasted in an already tax-deferred account. IRAs defer taxes anyway, so you want the highest yielding investments, not tax-exempt ones with lower yields."
            },
            {
                id: 25,
                question: "A general obligation bond differs from a revenue bond in that a GO bond:",
                answers: [
                    "Is backed by a specific revenue stream",
                    "Is backed by the full faith and credit and taxing power of the issuer",
                    "Typically offers higher yields due to greater risk",
                    "Does not require voter approval for issuance"
                ],
                correct: 1,
                explanation: "GO bonds are backed by the issuer's full faith, credit, and TAXING POWER. Revenue bonds are backed by specific project revenues. GO bonds typically yield LESS (safer) and usually require voter approval since they can lead to tax increases."
            },
            {
                id: 26,
                question: "An investor in the 35% tax bracket purchases a municipal bond yielding 4.2%. What corporate bond yield would provide an equivalent after-tax return?",
                answers: [
                    "5.60%",
                    "6.46%",
                    "5.67%",
                    "6.00%"
                ],
                correct: 1,
                explanation: "Tax-Equivalent Yield = Muni Yield / (1 - Tax Rate) = 4.2% / (1 - 0.35) = 4.2% / 0.65 = 6.46%. A taxable bond must yield 6.46% to equal the after-tax return of the 4.2% muni."
            },
            {
                id: 27,
                question: "A Treasury Inflation-Protected Security (TIPS) adjusts which of the following based on inflation?",
                answers: [
                    "The coupon rate only",
                    "The principal value only",
                    "Both the coupon rate and principal value",
                    "Neither - TIPS adjust only at maturity"
                ],
                correct: 1,
                explanation: "TIPS adjust the PRINCIPAL based on inflation (CPI). The coupon rate stays fixed, but since the principal grows with inflation, the actual dollar amount of interest paid increases. At maturity, you receive the greater of adjusted or original principal."
            },
            {
                id: 28,
                question: "All of the following are TRUE regarding zero-coupon bonds EXCEPT:",
                answers: [
                    "They are purchased at a discount to par value",
                    "They have no reinvestment risk",
                    "Annual phantom income must be reported for tax purposes",
                    "They have lower interest rate risk than coupon bonds"
                ],
                correct: 3,
                explanation: "Zero-coupon bonds have HIGHER interest rate risk (more price volatility) than comparable coupon bonds because all cash flows are received at maturity. They have no reinvestment risk (no coupons to reinvest) but maximum duration/interest rate sensitivity."
            },
            {
                id: 29,
                question: "A customer owns 500 shares of XYZ stock and is concerned about a potential short-term decline. Which strategy provides protection while maintaining upside potential?",
                answers: [
                    "Writing 5 XYZ covered calls",
                    "Buying 5 XYZ puts",
                    "Selling 500 shares and buying calls",
                    "Writing 5 XYZ naked puts"
                ],
                correct: 1,
                explanation: "Buying puts (protective puts or married puts) provides downside protection while maintaining unlimited upside. Covered calls limit upside. Selling shares eliminates the position. Naked puts provide no protection for existing shares."
            },
            {
                id: 30,
                question: "An investor purchases a 6-month Treasury bill at $9,850 for a $10,000 face value. The bank discount yield is approximately:",
                answers: [
                    "3.00%",
                    "3.04%",
                    "1.50%",
                    "1.52%"
                ],
                correct: 0,
                explanation: "Bank Discount Yield = (Discount / Face Value) × (360 / Days). Discount = $10,000 - $9,850 = $150. ($150 / $10,000) × (360 / 182) = 0.015 × 1.978 = 2.97% ≈ 3.00%."
            },
            {
                id: 31,
                question: "Which of the following statements about variable annuities is TRUE?",
                answers: [
                    "They guarantee a fixed return on investment",
                    "They are not considered securities and do not require registration",
                    "The insurance company bears the investment risk",
                    "Payments during the annuity phase vary based on account performance"
                ],
                correct: 3,
                explanation: "Variable annuity payments VARY based on the performance of the underlying investments. The investor bears the investment risk, not the insurance company. They ARE securities requiring registration and do not guarantee returns."
            },
            {
                id: 32,
                question: "A customer purchases a variable annuity and begins receiving payments. In the first year, the customer receives $10,000, of which $7,000 represents a return of principal. The customer's ordinary income for tax purposes is:",
                answers: [
                    "$0",
                    "$3,000",
                    "$7,000",
                    "$10,000"
                ],
                correct: 1,
                explanation: "Only the earnings portion is taxable as ordinary income. Payment = $10,000, Return of principal = $7,000, Taxable income = $10,000 - $7,000 = $3,000. Return of principal (cost basis) is not taxable."
            },
            {
                id: 33,
                question: "Which of the following Unit Investment Trusts (UITs) characteristics distinguishes it from a mutual fund?",
                answers: [
                    "UITs have actively managed portfolios",
                    "UITs have a fixed portfolio that is not actively traded",
                    "UITs can only invest in bonds",
                    "UITs are not registered investment companies"
                ],
                correct: 1,
                explanation: "UITs have FIXED, unmanaged portfolios - securities are selected at creation and typically held until maturity/termination. Mutual funds are actively managed. UITs can hold stocks or bonds and ARE registered investment companies."
            },
            {
                id: 34,
                question: "An investor owns 1,000 shares of XYZ at $30. The stock is going ex-dividend tomorrow with a $0.50 dividend. All else being equal, what should the opening price be on the ex-dividend date?",
                answers: [
                    "$29.50",
                    "$30.00",
                    "$30.50",
                    "$29.00"
                ],
                correct: 0,
                explanation: "On the ex-dividend date, the stock price is adjusted DOWN by the dividend amount. $30.00 - $0.50 = $29.50. This reflects that new buyers won't receive the dividend, so the price reflects the reduced value."
            },
            {
                id: 35,
                question: "A corporation announces a 3-for-2 stock split. An investor who owns 100 shares at $60 before the split will have:",
                answers: [
                    "150 shares at $40 each",
                    "66 shares at $90 each",
                    "100 shares at $40 each",
                    "150 shares at $60 each"
                ],
                correct: 0,
                explanation: "In a 3-for-2 split: Shares = 100 × 3/2 = 150 shares. Price = $60 × 2/3 = $40. Total value unchanged: 100 × $60 = $6,000 = 150 × $40. The investor has more shares at a lower price."
            },
            {
                id: 36,
                question: "Which of the following options positions has UNLIMITED loss potential?",
                answers: [
                    "Long call",
                    "Long put",
                    "Short put",
                    "Short call"
                ],
                correct: 3,
                explanation: "A short (naked) call has UNLIMITED loss potential because the stock can rise to infinity. The writer is obligated to sell at the strike price no matter how high the stock goes. Long calls/puts have limited loss (premium). Short puts have large but limited loss."
            },
            {
                id: 37,
                question: "An investor buys 1 XYZ Jan 50 put at $4 when XYZ is trading at $52. At expiration, XYZ is at $43. The investor's profit or loss is:",
                answers: [
                    "$300 profit",
                    "$700 profit",
                    "$400 loss",
                    "$700 loss"
                ],
                correct: 0,
                explanation: "The put is in the money. Intrinsic value at expiration = $50 - $43 = $7 = $700. Cost of put = $4 = $400. Profit = $700 - $400 = $300."
            },
            {
                id: 38,
                question: "All of the following are TRUE regarding cumulative preferred stock EXCEPT:",
                answers: [
                    "Missed dividends accumulate as dividends in arrears",
                    "All accumulated dividends must be paid before common dividends",
                    "Accumulated dividends earn compound interest",
                    "The board may choose not to declare dividends"
                ],
                correct: 2,
                explanation: "Cumulative preferred dividends do NOT earn interest - they simply accumulate. The amount owed is the stated dividend times the periods missed, with no compounding. The board can still skip dividends, but they accumulate as arrears."
            },
            {
                id: 39,
                question: "A bond with a 6% coupon is purchased at 90 and matures in 10 years at par. The yield to maturity is MOST LIKELY:",
                answers: [
                    "Less than 6%",
                    "Exactly 6%",
                    "Greater than 6% but less than the current yield",
                    "Greater than the current yield"
                ],
                correct: 3,
                explanation: "For a discount bond: Nominal (6%) < Current Yield < YTM. Current yield = $60/$900 = 6.67%. YTM is higher because it includes the gain from $900 to $1,000 at maturity, annualized. YTM is approximately 7.4%."
            },
            {
                id: 40,
                question: "An investor buys an XYZ Oct 40 call for $3 and an XYZ Oct 40 put for $2. This strategy is called a:",
                answers: [
                    "Spread",
                    "Straddle",
                    "Combination",
                    "Covered write"
                ],
                correct: 1,
                explanation: "A straddle is buying (or selling) both a call AND put on the same stock with the SAME strike price AND expiration. The investor is betting on volatility in either direction. Cost basis is $500 ($3 + $2)."
            },
            {
                id: 41,
                question: "Using the previous question, what is the breakeven for this straddle on the upside?",
                answers: [
                    "$35",
                    "$40",
                    "$43",
                    "$45"
                ],
                correct: 3,
                explanation: "Long straddle breakeven (upside) = Strike + Total Premium = $40 + $5 = $45. Breakeven (downside) = Strike - Total Premium = $40 - $5 = $35. Stock must move beyond these points for profit."
            },
            {
                id: 42,
                question: "Which of the following ETFs would be MOST suitable for an investor seeking to profit from a declining market?",
                answers: [
                    "S&P 500 Index ETF",
                    "Inverse S&P 500 ETF",
                    "Leveraged S&P 500 ETF (2x)",
                    "Dividend-focused ETF"
                ],
                correct: 1,
                explanation: "An INVERSE ETF is designed to move opposite to the index - it gains when the index falls. A 2x leveraged ETF amplifies gains AND losses on the upside. Regular index and dividend ETFs would lose value in a declining market."
            },
            {
                id: 43,
                question: "A customer has $200,000 in securities and $50,000 in cash in a brokerage account. If the broker-dealer fails, SIPC protection would cover:",
                answers: [
                    "Up to $250,000 total",
                    "Up to $500,000 total, with $250,000 maximum for cash",
                    "$200,000 in securities only",
                    "Nothing, SIPC only covers market losses"
                ],
                correct: 1,
                explanation: "SIPC covers up to $500,000 per customer, including a maximum of $250,000 for cash. Here, the full $200,000 in securities and $50,000 in cash would be covered. SIPC protects against broker-dealer failure, NOT market losses."
            },
            {
                id: 44,
                question: "An investor owns 100 shares of ABC at $75 and writes 1 ABC Jul 80 call at $3. If ABC rises to $90, what is the investor's maximum profit?",
                answers: [
                    "$300",
                    "$500",
                    "$800",
                    "$1,500"
                ],
                correct: 2,
                explanation: "Covered call max profit = (Strike - Purchase Price) + Premium. ($80 - $75) × 100 + $300 = $500 + $300 = $800. The stock appreciation is capped at the strike ($80), even though it went to $90."
            },
            {
                id: 45,
                question: "All of the following are characteristics of hedge funds EXCEPT:",
                answers: [
                    "They are typically limited to accredited investors",
                    "They may use leverage and short selling",
                    "They must register with the SEC under the Investment Company Act of 1940",
                    "They typically charge performance-based fees"
                ],
                correct: 2,
                explanation: "Hedge funds use exemptions to AVOID registration under the Investment Company Act of 1940. They're sold through private placements to accredited investors, can use various strategies, and typically charge '2 and 20' fees."
            },

            // ========== UNDERSTANDING TRADING, CUSTOMER ACCOUNTS AND PROHIBITED ACTIVITIES (31%) - 23 Questions ==========
            {
                id: 46,
                question: "A registered representative discovers that a customer has been structuring cash deposits to avoid Currency Transaction Reports. The representative should:",
                answers: [
                    "Inform the customer that structuring is illegal",
                    "File a Suspicious Activity Report without informing the customer",
                    "Close the customer's account immediately",
                    "Report the activity to the branch manager and take no further action"
                ],
                correct: 1,
                explanation: "A SAR must be filed within 30 days, and the customer must NOT be informed ('tipping off' is a violation). Structuring deposits to avoid CTR reporting is illegal, and the firm must file a SAR without alerting the customer."
            },
            {
                id: 47,
                question: "Which of the following activities would require a customer's PRIOR written authorization?",
                answers: [
                    "Selecting the time to execute a customer's order",
                    "Selecting the price at which to execute a customer's order",
                    "Selecting which securities to purchase for a customer",
                    "Determining the appropriate exchange for execution"
                ],
                correct: 2,
                explanation: "Selecting the SECURITY (asset) requires written discretionary authority. Time and price decisions are NOT discretionary. The 'AAA' test: Asset, Amount, or Action = discretionary. Time/price = not discretionary."
            },
            {
                id: 48,
                question: "A customer places an order to 'buy 500 shares of XYZ at 25, GTC.' On what day will this order expire if not executed?",
                answers: [
                    "End of the trading day",
                    "End of the week",
                    "The order remains open until canceled or executed",
                    "30 calendar days from the order date"
                ],
                correct: 2,
                explanation: "GTC (Good Till Canceled) orders remain open until executed or canceled by the investor. However, most firms have policies limiting GTC orders to 60-90 days, after which they must be re-entered. Day orders expire at market close."
            },
            {
                id: 49,
                question: "An investor enters a sell stop order at $45 for 100 shares of stock currently trading at $48. The following trades occur: $47, $46, $45, $44.50, $45.50. At what price will the order MOST LIKELY be executed?",
                answers: [
                    "$45.00",
                    "$44.50",
                    "$45.50",
                    "The order will not be executed"
                ],
                correct: 1,
                explanation: "When the stop price ($45) is reached, the order becomes a MARKET order. It executes at the next available price after triggering. The stop was triggered at $45, then the next trade was $44.50, which is where it would likely fill."
            },
            {
                id: 50,
                question: "Under FINRA's suitability rule, a registered representative must have a reasonable basis to believe that a recommendation is suitable based on all of the following EXCEPT:",
                answers: [
                    "The customer's investment objectives",
                    "The customer's financial situation",
                    "The customer's tax status",
                    "The customer's political affiliations"
                ],
                correct: 3,
                explanation: "Suitability factors include investment objectives, financial situation, tax status, risk tolerance, time horizon, and liquidity needs. Political affiliations are NOT a suitability factor and are irrelevant to investment recommendations."
            },
            {
                id: 51,
                question: "A customer opens a new account and refuses to provide social security number and other required identification. The registered representative should:",
                answers: [
                    "Open the account but note the missing information",
                    "Refuse to open the account until all required information is provided",
                    "Open the account with a different type of identification",
                    "Escalate to management for approval"
                ],
                correct: 1,
                explanation: "Under the Customer Identification Program (CIP) rules for anti-money laundering, firms MUST obtain and verify certain identifying information, including SSN for U.S. persons. The account cannot be opened without this information."
            },
            {
                id: 52,
                question: "Which of the following would be considered 'front running'?",
                answers: [
                    "A broker buys stock for his own account before executing a large customer buy order",
                    "A broker executes a customer order at the best available price",
                    "A broker sells stock after receiving negative research from the analyst",
                    "A broker purchases shares based on a stock tip from a friend"
                ],
                correct: 0,
                explanation: "Front running is trading ahead of a customer order to benefit from the anticipated price movement the customer order will cause. This is a serious violation of fiduciary duty and securities laws."
            },
            {
                id: 53,
                question: "A customer has a margin account with long market value of $50,000 and a debit balance of $20,000. If the minimum maintenance requirement is 25%, at what price would a margin call be issued if the customer owns 500 shares?",
                answers: [
                    "$26.67",
                    "$40.00",
                    "$53.33",
                    "$80.00"
                ],
                correct: 2,
                explanation: "Margin Call Price = Debit Balance / (1 - Maintenance %). $20,000 / (1 - 0.25) = $20,000 / 0.75 = $26,666.67 for the account. Per share: $26,666.67 / 500 shares = $53.33."
            },
            {
                id: 54,
                question: "Under Regulation T, payment for securities purchased in a cash account must be made within:",
                answers: [
                    "The same day (T+0)",
                    "Two business days (T+2)",
                    "Four business days from trade date",
                    "Seven calendar days"
                ],
                correct: 2,
                explanation: "Regulation T requires payment within 4 BUSINESS days from trade date. Note: Settlement is T+1, but Reg T allows 4 business days for payment. If not paid, the account may be frozen for 90 days."
            },
            {
                id: 55,
                question: "All of the following information must be included on a customer's trade confirmation EXCEPT:",
                answers: [
                    "Whether the firm acted as agent or principal",
                    "The commission charged on an agency trade",
                    "The markup on a principal trade",
                    "The time of execution"
                ],
                correct: 2,
                explanation: "The markup on a principal trade does NOT need to be disclosed on the confirmation. Commission must be disclosed on agency trades. Whether the firm acted as agent/principal and time of execution must be disclosed."
            },
            {
                id: 56,
                question: "A husband and wife open a joint account with rights of survivorship (JTWROS). If one spouse dies, the account assets:",
                answers: [
                    "Pass to the deceased spouse's estate",
                    "Are frozen until probate is complete",
                    "Pass directly to the surviving spouse",
                    "Are divided equally between the estate and surviving spouse"
                ],
                correct: 2,
                explanation: "In JTWROS, assets pass DIRECTLY to the surviving owner, avoiding probate. This differs from Tenants in Common (TIC/JTIC), where the deceased's share goes to their estate."
            },
            {
                id: 57,
                question: "Which of the following custodial account activities is PROHIBITED?",
                answers: [
                    "Purchasing blue chip stocks",
                    "Purchasing municipal bonds",
                    "Trading on margin",
                    "Opening the account at a discount broker"
                ],
                correct: 2,
                explanation: "Margin trading, short selling, and uncovered options are PROHIBITED in UTMA/UGMA custodial accounts. Only cash account activities are permitted because these accounts are for minors who cannot be held to margin agreements."
            },
            {
                id: 58,
                question: "A Currency Transaction Report (CTR) must be filed for cash transactions exceeding:",
                answers: [
                    "$3,000 in a single transaction",
                    "$5,000 in a single day",
                    "$10,000 in a single day",
                    "$15,000 in a single month"
                ],
                correct: 2,
                explanation: "CTRs are required for cash transactions exceeding $10,000 in a single day. 'Structuring' - breaking up transactions to avoid this threshold - is illegal. SARs are filed for suspicious activity involving $5,000 or more."
            },
            {
                id: 59,
                question: "A representative notices a pattern of transactions in a customer account that appears to have no economic purpose and may be designed to obscure the source of funds. The representative should:",
                answers: [
                    "Confront the customer about the suspicious activity",
                    "File a Suspicious Activity Report",
                    "Close the account and return the funds",
                    "Ignore it unless specifically asked by compliance"
                ],
                correct: 1,
                explanation: "A SAR must be filed for suspicious activity that may indicate money laundering. The customer must NOT be informed (no 'tipping off'). The account should not be closed without compliance guidance as that could alert the customer."
            },
            {
                id: 60,
                question: "Under the SEC's Regulation Best Interest (Reg BI), a broker-dealer must:",
                answers: [
                    "Act as a fiduciary for all customer accounts",
                    "Always recommend the lowest-cost investment option",
                    "Act in the best interest of the retail customer at the time of recommendation",
                    "Provide investment advice for an annual fee"
                ],
                correct: 2,
                explanation: "Reg BI requires broker-dealers to act in the retail customer's best interest at the TIME of recommendation. It doesn't impose a fiduciary standard, doesn't require lowest cost, and applies to recommendations, not ongoing advice."
            },
            {
                id: 61,
                question: "A pattern day trader must maintain minimum equity of:",
                answers: [
                    "$10,000",
                    "$25,000",
                    "$50,000",
                    "$100,000"
                ],
                correct: 1,
                explanation: "A Pattern Day Trader (PDT) - someone who executes 4+ day trades in 5 business days - must maintain minimum equity of $25,000 in their margin account. Falling below triggers restrictions."
            },
            {
                id: 62,
                question: "An investor enters a buy limit order at $50 for a stock currently trading at $52. The order will be executed:",
                answers: [
                    "Immediately at $52",
                    "Only if the stock falls to $50 or lower",
                    "At the market close if the stock is at $50",
                    "Never, because the limit is below the current price"
                ],
                correct: 1,
                explanation: "Buy limit orders are placed BELOW current market. The order only executes if the stock falls to $50 or lower. It will not execute at $52. Remember: 'Buy low' - buy limits are below market."
            },
            {
                id: 63,
                question: "Which of the following is TRUE regarding discretionary accounts?",
                answers: [
                    "The representative can determine price and time without written authorization",
                    "Each discretionary order must be marked as such and approved by a principal",
                    "Discretionary authority automatically transfers when a representative changes firms",
                    "Verbal authorization is sufficient for first 30 days"
                ],
                correct: 1,
                explanation: "Each discretionary trade must be marked as discretionary and approved by a principal on the day of the trade. Written authorization is required. Authority doesn't transfer between firms. Price/time alone isn't discretionary."
            },
            {
                id: 64,
                question: "A broker-dealer must deliver the options disclosure document (ODD) to a customer:",
                answers: [
                    "After the first options trade is executed",
                    "At or before account approval",
                    "Only if requested by the customer",
                    "Within 30 days of account opening"
                ],
                correct: 1,
                explanation: "The ODD (Characteristics and Risks of Standardized Options) must be delivered AT or BEFORE options account approval. This ensures customers understand options risks before trading."
            },
            {
                id: 65,
                question: "Under FINRA rules, all of the following customer information must be verified EXCEPT:",
                answers: [
                    "Name",
                    "Date of birth",
                    "Address",
                    "Net worth"
                ],
                correct: 3,
                explanation: "Customer Identification Program (CIP) requires verification of name, date of birth, address, and identification number (SSN or TIN). Net worth and other financial information must be obtained but not independently verified."
            },
            {
                id: 66,
                question: "A customer places an order to buy 1,000 shares of XYZ 'at the open.' This type of order:",
                answers: [
                    "Guarantees execution at the opening price",
                    "Must be executed within the first 30 minutes of trading",
                    "Will be executed at or near the opening price if possible",
                    "Is a limit order at the previous day's closing price"
                ],
                correct: 2,
                explanation: "An 'at the open' or market-on-open order is executed at or near the opening price. It doesn't guarantee a specific price - it's still a market order executed during the opening auction/period."
            },
            {
                id: 67,
                question: "Which of the following best describes 'painting the tape'?",
                answers: [
                    "Executing fictitious trades to create the appearance of activity",
                    "Providing misleading research to customers",
                    "Executing trades at the close to affect valuations",
                    "Trading ahead of customer orders"
                ],
                correct: 0,
                explanation: "Painting the tape is executing fictitious or collusive trades to create the false appearance of trading activity, misleading other investors. Marking the close is manipulating closing prices. Front running is trading ahead of orders."
            },
            {
                id: 68,
                question: "A customer asks a representative to hold mail for 60 days while traveling. Under FINRA rules, this request:",
                answers: [
                    "Must be denied - holding mail is never permitted",
                    "May be honored with written instruction and a valid reason",
                    "May be honored verbally for up to 90 days",
                    "Requires principal approval for any period"
                ],
                correct: 1,
                explanation: "FINRA permits holding customer mail with written instructions, a valid reason (like travel), and a specific time period not exceeding 3 months (domestic) or 3 months for international travel. Longer periods require additional justification."
            },

            // ========== OVERVIEW OF REGULATORY FRAMEWORK (9%) - 7 Questions ==========
            {
                id: 69,
                question: "The Securities Exchange Act of 1934 created which of the following?",
                answers: [
                    "The Municipal Securities Rulemaking Board",
                    "The Securities and Exchange Commission",
                    "The Financial Industry Regulatory Authority",
                    "The Options Clearing Corporation"
                ],
                correct: 1,
                explanation: "The Securities Exchange Act of 1934 created the SEC. The '34 Act regulates secondary market trading and broker-dealers. FINRA was created in 2007 from NASD/NYSE merger. MSRB was created in 1975. OCC was created in 1973."
            },
            {
                id: 70,
                question: "FINRA is classified as a:",
                answers: [
                    "Federal government agency",
                    "Self-regulatory organization (SRO)",
                    "Division of the SEC",
                    "Stock exchange"
                ],
                correct: 1,
                explanation: "FINRA is a Self-Regulatory Organization (SRO), not a government agency. It's a private non-profit that regulates broker-dealers under SEC oversight. It writes rules, administers exams, and handles enforcement."
            },
            {
                id: 71,
                question: "Form U4 must be filed when:",
                answers: [
                    "A broker-dealer is registered with the SEC",
                    "A customer opens a new account",
                    "An associated person joins a broker-dealer",
                    "A registered representative is terminated"
                ],
                correct: 2,
                explanation: "Form U4 (Uniform Application for Securities Industry Registration) is filed when an associated person JOINS a firm. Form U5 is filed when they leave. U4 contains background information, employment history, and disclosures."
            },
            {
                id: 72,
                question: "Under the Securities Act of 1933, registration is required for which of the following securities?",
                answers: [
                    "U.S. Treasury bills",
                    "Municipal bonds",
                    "Common stock of a new technology company",
                    "Commercial paper with 180-day maturity"
                ],
                correct: 2,
                explanation: "Corporate securities (like common stock) must be registered under the 1933 Act. Treasuries, munis, and commercial paper (under 270 days) are EXEMPT. The '33 Act regulates primary market/new issues."
            },
            {
                id: 73,
                question: "Which regulatory body writes rules for municipal securities but cannot enforce them?",
                answers: [
                    "SEC",
                    "FINRA",
                    "MSRB",
                    "Federal Reserve"
                ],
                correct: 2,
                explanation: "The MSRB (Municipal Securities Rulemaking Board) writes rules for municipal securities dealers but CANNOT enforce them. FINRA and SEC enforce MSRB rules. This is because muni issuers are state/local governments."
            },
            {
                id: 74,
                question: "The SEC has the authority to do all of the following EXCEPT:",
                answers: [
                    "Impose civil fines",
                    "Bar individuals from the securities industry",
                    "File criminal charges",
                    "Issue cease and desist orders"
                ],
                correct: 2,
                explanation: "The SEC has CIVIL enforcement authority only - it cannot file criminal charges. Criminal violations are prosecuted by the Department of Justice. The SEC can fine, bar, disgorg profits, and issue cease and desist orders."
            },
            {
                id: 75,
                question: "Customer complaints regarding a registered representative must be maintained for:",
                answers: [
                    "3 years",
                    "4 years",
                    "6 years",
                    "The lifetime of the account"
                ],
                correct: 1,
                explanation: "Customer complaints must be maintained for 4 years under FINRA rules. These records can impact a representative's record and appear on their CRD/BrokerCheck. General account records are kept for 6 years."
            }
        ];

        // Exam State
        let currentIndex = 0;
        let answers = {};
        let flagged = new Set();
        let examStartTime = null;
        let timeRemaining = 105 * 60; // 105 minutes in seconds
        let timerInterval = null;
        let examSubmitted = false;

        // DOM Elements
        const startScreen = document.getElementById('startScreen');
        const examScreen = document.getElementById('examScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const timerBar = document.getElementById('timerBar');
        const startBtn = document.getElementById('startBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const flagBtn = document.getElementById('flagBtn');
        const gridToggle = document.getElementById('gridToggle');
        const questionGrid = document.getElementById('questionGrid');
        const restartBtn = document.getElementById('restartBtn');

        // Initialize exam
        function startExam() {
            currentIndex = 0;
            answers = {};
            flagged = new Set();
            examSubmitted = false;
            timeRemaining = 105 * 60;
            examStartTime = Date.now();

            // Shuffle questions
            examQuestions.sort(() => Math.random() - 0.5);

            startScreen.style.display = 'none';
            examScreen.style.display = 'block';
            timerBar.style.display = 'block';

            buildQuestionGrid();
            showQuestion();
            startTimer();
        }

        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timeRemaining / 3600);
            const minutes = Math.floor((timeRemaining % 3600) / 60);
            const seconds = timeRemaining % 60;

            const display = document.getElementById('timeRemaining');
            const timerDiv = document.getElementById('timerDisplay');

            display.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (timeRemaining <= 300) { // 5 minutes
                timerDiv.classList.add('danger');
                timerDiv.classList.remove('warning');
            } else if (timeRemaining <= 900) { // 15 minutes
                timerDiv.classList.add('warning');
            }
        }

        function showQuestion() {
            const q = examQuestions[currentIndex];

            document.getElementById('questionNumber').textContent = `Question ${currentIndex + 1} of ${examQuestions.length}`;
            document.getElementById('currentQ').textContent = currentIndex + 1;
            document.getElementById('totalQ').textContent = examQuestions.length;
            document.getElementById('questionText').textContent = q.question;

            const answersList = document.getElementById('answersList');
            answersList.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D'];
            q.answers.forEach((answer, i) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                if (answers[q.id] === i) {
                    btn.classList.add('selected');
                }
                btn.innerHTML = `<span class="answer-letter">${letters[i]}.</span><span>${answer}</span>`;
                btn.addEventListener('click', () => selectAnswer(i));
                answersList.appendChild(btn);
            });

            // Update flag button
            flagBtn.classList.toggle('flagged', flagged.has(q.id));

            // Update navigation
            prevBtn.disabled = currentIndex === 0;

            if (currentIndex === examQuestions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }

            // Update progress
            document.getElementById('progressFill').style.width = `${((currentIndex + 1) / examQuestions.length) * 100}%`;

            // Update grid
            updateQuestionGrid();
        }

        function selectAnswer(index) {
            const q = examQuestions[currentIndex];
            answers[q.id] = index;

            // Update UI
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });

            updateQuestionGrid();
        }

        function buildQuestionGrid() {
            const grid = document.getElementById('gridButtons');
            grid.innerHTML = '';

            examQuestions.forEach((q, i) => {
                const btn = document.createElement('button');
                btn.className = 'grid-btn';
                btn.textContent = i + 1;
                btn.addEventListener('click', () => {
                    currentIndex = i;
                    showQuestion();
                });
                grid.appendChild(btn);
            });
        }

        function updateQuestionGrid() {
            const buttons = document.querySelectorAll('.grid-btn');
            buttons.forEach((btn, i) => {
                const q = examQuestions[i];
                btn.classList.remove('current', 'answered', 'flagged');

                if (i === currentIndex) {
                    btn.classList.add('current');
                } else if (answers[q.id] !== undefined) {
                    btn.classList.add('answered');
                }

                if (flagged.has(q.id)) {
                    btn.classList.add('flagged');
                }
            });
        }

        function toggleFlag() {
            const q = examQuestions[currentIndex];
            if (flagged.has(q.id)) {
                flagged.delete(q.id);
            } else {
                flagged.add(q.id);
            }
            flagBtn.classList.toggle('flagged', flagged.has(q.id));
            updateQuestionGrid();
        }

        function submitExam() {
            if (examSubmitted) return;

            const unanswered = examQuestions.filter(q => answers[q.id] === undefined).length;

            if (unanswered > 0 && timeRemaining > 0) {
                if (!confirm(`You have ${unanswered} unanswered question(s). Are you sure you want to submit?`)) {
                    return;
                }
            }

            examSubmitted = true;
            clearInterval(timerInterval);

            // Calculate results
            let correct = 0;
            examQuestions.forEach(q => {
                if (answers[q.id] === q.correct) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / examQuestions.length) * 100);
            const passed = percentage >= 70;
            const elapsed = Math.floor((Date.now() - examStartTime) / 1000);

            // Show results
            examScreen.style.display = 'none';
            timerBar.style.display = 'none';
            resultsScreen.style.display = 'block';

            const badge = document.getElementById('resultsBadge');
            const score = document.getElementById('finalScore');

            badge.textContent = passed ? 'PASS' : 'FAIL';
            badge.className = 'results-badge ' + (passed ? 'pass' : 'fail');

            score.textContent = percentage + '%';
            score.className = 'results-score ' + (passed ? 'pass' : 'fail');

            document.getElementById('finalCorrect').textContent = correct;
            document.getElementById('finalIncorrect').textContent = examQuestions.length - correct;

            const hours = Math.floor(elapsed / 3600);
            const minutes = Math.floor((elapsed % 3600) / 60);
            const seconds = elapsed % 60;
            document.getElementById('resultsTime').textContent =
                `Time: ${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            buildReviewSection();
        }

        function buildReviewSection(filter = 'all') {
            const container = document.getElementById('reviewList');
            container.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D'];

            examQuestions.forEach((q, i) => {
                const userAnswer = answers[q.id];
                const isCorrect = userAnswer === q.correct;
                const isFlagged = flagged.has(q.id);

                // Apply filter
                if (filter === 'incorrect' && isCorrect) return;
                if (filter === 'flagged' && !isFlagged) return;

                const div = document.createElement('div');
                div.className = 'review-question ' + (isCorrect ? 'correct' : 'incorrect');

                let answersHtml = '';
                q.answers.forEach((ans, j) => {
                    let className = 'review-answer';
                    if (j === q.correct) className += ' correct-answer';
                    if (j === userAnswer && j !== q.correct) className += ' your-answer';
                    answersHtml += `<div class="${className}">${letters[j]}. ${ans}</div>`;
                });

                div.innerHTML = `
                    <div class="review-question__header">
                        <span class="review-question__number">Question ${i + 1}</span>
                        <span class="review-question__status ${isCorrect ? 'correct' : 'incorrect'}">
                            ${isCorrect ? 'Correct' : 'Incorrect'}
                        </span>
                    </div>
                    <div class="review-question__text">${q.question}</div>
                    <div class="review-answers">${answersHtml}</div>
                    <div class="review-explanation">${q.explanation}</div>
                `;

                container.appendChild(div);
            });
        }

        // Event Listeners
        startBtn.addEventListener('click', startExam);
        prevBtn.addEventListener('click', () => { currentIndex--; showQuestion(); });
        nextBtn.addEventListener('click', () => { currentIndex++; showQuestion(); });
        submitBtn.addEventListener('click', submitExam);
        flagBtn.addEventListener('click', toggleFlag);
        gridToggle.addEventListener('click', () => questionGrid.classList.toggle('show'));

        restartBtn.addEventListener('click', () => {
            resultsScreen.style.display = 'none';
            startScreen.style.display = 'block';
        });

        // Review tabs
        document.querySelectorAll('.review-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.review-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                buildReviewSection(tab.dataset.filter);
            });
        });
    </script>
</body>
</html>
