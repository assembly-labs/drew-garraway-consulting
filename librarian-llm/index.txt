<!DOCTYPE html>
<html lang="en" data-theme="ccls">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CCLS Library Assistant</title>
  <style>
    /* CSS Variables - Light Theme (Default) */
    :root,
    [data-theme="light"] {
      --color-primary: #2563eb;
      --color-primary-hover: #1d4ed8;
      --color-primary-active: #1e40af;
      --color-primary-light: #dbeafe;
      --color-accent: #10b981;
      --color-accent-hover: #059669;
      --color-accent-light: #d1fae5;
      --color-bg-page: #ffffff;
      --color-bg-surface: #f9fafb;
      --color-bg-user: #f3f4f6;
      --color-bg-assistant: #ffffff;
      --color-bg-hover: #f3f4f6;
      --color-bg-input: #ffffff;
      --color-text-primary: #111827;
      --color-text-secondary: #6b7280;
      --color-text-tertiary: #9ca3af;
      --color-text-inverse: #ffffff;
      --color-text-link: #2563eb;
      --color-border: #e5e7eb;
      --color-border-strong: #d1d5db;
      --color-border-focus: #2563eb;
      --color-success: #059669;
      --color-success-bg: #d1fae5;
      --color-warning: #d97706;
      --color-warning-bg: #fef3c7;
      --color-error: #dc2626;
      --color-error-bg: #fee2e2;
      --color-info: #0284c7;
      --color-info-bg: #e0f2fe;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }

    /* Dark Theme */
    [data-theme="dark"] {
      --color-primary: #60a5fa;
      --color-primary-hover: #93c5fd;
      --color-primary-active: #3b82f6;
      --color-primary-light: #1e3a5f;
      --color-accent: #34d399;
      --color-accent-hover: #6ee7b7;
      --color-accent-light: #064e3b;
      --color-bg-page: #0f172a;
      --color-bg-surface: #1e293b;
      --color-bg-user: #334155;
      --color-bg-assistant: #1e293b;
      --color-bg-hover: #334155;
      --color-bg-input: #1e293b;
      --color-text-primary: #f1f5f9;
      --color-text-secondary: #94a3b8;
      --color-text-tertiary: #64748b;
      --color-text-inverse: #0f172a;
      --color-text-link: #60a5fa;
      --color-border: #334155;
      --color-border-strong: #475569;
      --color-border-focus: #60a5fa;
      --color-success: #34d399;
      --color-success-bg: #064e3b;
      --color-warning: #fbbf24;
      --color-warning-bg: #78350f;
      --color-error: #f87171;
      --color-error-bg: #7f1d1d;
      --color-info: #38bdf8;
      --color-info-bg: #0c4a6e;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    }

    /* CCLS Theme */
    [data-theme="ccls"] {
      --color-primary: #01416e;
      --color-primary-hover: #023558;
      --color-primary-active: #012a45;
      --color-primary-light: #e6f0f7;
      --color-accent: #55b948;
      --color-accent-hover: #4aa840;
      --color-accent-light: #e8f5e6;
      --color-bg-page: #ffffff;
      --color-bg-surface: #f8fafb;
      --color-bg-user: #e6f0f7;
      --color-bg-assistant: #ffffff;
      --color-bg-hover: #f0f5f8;
      --color-bg-input: #ffffff;
      --color-text-primary: #01416e;
      --color-text-secondary: #5a6c7d;
      --color-text-tertiary: #8b99a6;
      --color-text-inverse: #ffffff;
      --color-text-link: #01416e;
      --color-border: #d9e2ec;
      --color-border-strong: #c1cdd8;
      --color-border-focus: #01416e;
      --color-success: #55b948;
      --color-success-bg: #e8f5e6;
      --color-warning: #f59e0b;
      --color-warning-bg: #fef3c7;
      --color-error: #dc2626;
      --color-error-bg: #fee2e2;
      --color-info: #01416e;
      --color-info-bg: #e6f0f7;
      --shadow-sm: 0 1px 2px 0 rgba(1, 65, 110, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(1, 65, 110, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(1, 65, 110, 0.1);
      --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      --text-xs: 14px;
      --text-sm: 15px;
      --text-base: 16px;
      --text-lg: 18px;
      --text-xl: 20px;
      --text-2xl: 24px;
      --leading-tight: 1.5;
      --leading-normal: 1.6;
      --font-normal: 400;
      --font-medium: 500;
      --font-semibold: 600;
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --container-max-width: 800px;
      --message-max-width: 680px;
      --border-radius-sm: 6px;
      --border-radius-md: 8px;
      --border-radius-lg: 12px;
      --border-radius-full: 9999px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--font-sans);
      font-size: var(--text-base);
      line-height: var(--leading-tight);
      color: var(--color-text-primary);
      background: var(--color-bg-page);
      min-height: 100vh;
    }
    button { font-family: inherit; cursor: pointer; }
    a { color: var(--color-text-link); text-decoration: none; }

    /* Layout */
    .app-container { display: flex; flex-direction: column; min-height: 100vh; }
    .chat-container { flex: 1; width: 100%; max-width: var(--container-max-width); margin: 0 auto; padding: var(--space-4); padding-bottom: 120px; }
    .chat-messages { display: flex; flex-direction: column; gap: var(--space-3); }

    /* Header */
    .app-header { position: sticky; top: 0; z-index: 200; background: var(--color-bg-page); border-bottom: 2px solid var(--color-border); padding: var(--space-4); }
    .header-content { max-width: var(--container-max-width); margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: var(--space-4); }
    .header-left { display: flex; align-items: center; gap: var(--space-3); }
    .menu-toggle { width: 40px; height: 40px; border: none; background: transparent; color: var(--color-text-primary); display: flex; align-items: center; justify-content: center; border-radius: var(--border-radius-sm); }
    .menu-toggle:hover { background: var(--color-bg-hover); }
    .library-logo { display: flex; align-items: center; gap: var(--space-2); text-decoration: none; cursor: pointer; padding: var(--space-2); border-radius: var(--border-radius-md); transition: background 0.15s ease; }
    .library-logo:hover { background: var(--color-bg-hover); }
    .library-logo-icon { width: 32px; height: 32px; border-radius: var(--border-radius-sm); background: var(--color-primary); color: var(--color-text-inverse); display: flex; align-items: center; justify-content: center; font-size: var(--text-lg); font-weight: var(--font-semibold); }
    .library-name { font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--color-text-primary); }
    .header-actions { display: flex; align-items: center; gap: var(--space-2); }
    .icon-button { width: 40px; height: 40px; border: none; background: transparent; color: var(--color-text-secondary); display: flex; align-items: center; justify-content: center; border-radius: var(--border-radius-sm); }
    .icon-button:hover { background: var(--color-bg-hover); color: var(--color-text-primary); }
    .notification-badge { position: relative; }
    .notification-badge::after { content: ''; position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: var(--color-error); border-radius: 50%; border: 2px solid var(--color-bg-page); }

    /* Side Menu */
    .side-menu-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 300; opacity: 0; visibility: hidden; transition: opacity 0.2s ease, visibility 0.2s ease; }
    .side-menu-overlay.active { opacity: 1; visibility: visible; }
    .side-menu { position: fixed; top: 0; left: 0; bottom: 0; width: 280px; max-width: 85vw; background: var(--color-bg-page); z-index: 301; transform: translateX(-100%); transition: transform 0.2s ease; overflow-y: auto; box-shadow: var(--shadow-lg); }
    .side-menu.active { transform: translateX(0); }
    .side-menu-header { padding: var(--space-4); border-bottom: 2px solid var(--color-border); display: flex; align-items: center; justify-content: space-between; }
    .side-menu-title { font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--color-text-primary); }
    .side-menu-close { width: 36px; height: 36px; border: none; background: transparent; color: var(--color-text-secondary); display: flex; align-items: center; justify-content: center; border-radius: var(--border-radius-sm); }
    .side-menu-close:hover { background: var(--color-bg-hover); color: var(--color-text-primary); }
    .side-menu-content { padding: var(--space-2) 0; }
    .menu-section { margin-bottom: var(--space-4); }
    .menu-section-title { padding: var(--space-2) var(--space-4); font-size: var(--text-xs); font-weight: var(--font-semibold); color: var(--color-text-tertiary); text-transform: uppercase; letter-spacing: 0.05em; }
    .menu-item { display: flex; align-items: center; gap: var(--space-3); padding: var(--space-3) var(--space-4); color: var(--color-text-primary); text-decoration: none; border: none; background: transparent; width: 100%; text-align: left; font-size: var(--text-base); }
    .menu-item:hover { background: var(--color-bg-hover); }
    .menu-item-icon { width: 20px; display: flex; align-items: center; justify-content: center; }
    .menu-item-text { flex: 1; }
    .menu-item-badge { padding: 2px 8px; border-radius: var(--border-radius-full); background: var(--color-error); color: var(--color-text-inverse); font-size: var(--text-xs); font-weight: var(--font-semibold); }
    .menu-divider { height: 2px; background: var(--color-border); margin: var(--space-2) var(--space-4); }

    /* Messages */
    .message { max-width: var(--message-max-width); padding: var(--space-4); border-radius: var(--border-radius-lg); font-size: var(--text-base); line-height: var(--leading-tight); color: var(--color-text-primary); }
    .message p { margin: 0; }
    .message p + p { margin-top: var(--space-3); }
    .message--user { margin-left: auto; background: var(--color-bg-user); }
    .message--assistant { background: var(--color-bg-assistant); border: 2px solid var(--color-border); }
    .message--help { background: var(--color-info-bg); border-left: 3px solid var(--color-info); }
    .message--handoff { background: var(--color-bg-surface); border: 1px solid var(--color-border-strong); padding: var(--space-5); }
    .handoff-icon { font-size: var(--text-2xl); margin-bottom: var(--space-2); display: block; }
    .handoff-meta { font-size: var(--text-sm); color: var(--color-text-secondary); margin-top: var(--space-3); }

    /* Book Cards */
    .book-card { background: var(--color-bg-surface); border: 2px solid var(--color-border); border-radius: var(--border-radius-md); padding: var(--space-4); margin-top: var(--space-3); }
    .book-card-header { display: flex; gap: var(--space-4); margin-bottom: var(--space-3); }
    .book-cover { width: 80px; height: 120px; flex-shrink: 0; background: var(--color-bg-hover); border: 2px solid var(--color-border); border-radius: var(--border-radius-sm); display: flex; align-items: center; justify-content: center; font-size: var(--text-2xl); }
    .book-info { flex: 1; min-width: 0; }
    .book-title { font-size: var(--text-lg); font-weight: var(--font-semibold); margin-bottom: var(--space-1); line-height: var(--leading-normal); }
    .book-author { font-size: var(--text-base); color: var(--color-text-secondary); margin-bottom: var(--space-2); }
    .book-formats { display: flex; gap: var(--space-2); flex-wrap: wrap; }
    .book-explanation { font-size: var(--text-sm); color: var(--color-text-secondary); line-height: var(--leading-normal); margin-bottom: var(--space-3); padding: var(--space-3); background: var(--color-bg-page); border-radius: var(--border-radius-sm); border: 1px solid var(--color-border); }
    .book-actions { display: flex; gap: var(--space-2); flex-wrap: wrap; }

    /* Badges */
    .badge { display: inline-flex; align-items: center; gap: var(--space-1); padding: 4px 10px; border-radius: var(--border-radius-full); font-size: var(--text-xs); font-weight: var(--font-medium); line-height: 1; }
    .badge--available { background: var(--color-success-bg); color: var(--color-success); }
    .badge--waitlist { background: var(--color-warning-bg); color: var(--color-warning); }
    .badge--format { background: var(--color-bg-surface); color: var(--color-text-secondary); border: 2px solid var(--color-border); }

    /* Buttons */
    .btn { padding: 10px 20px; border-radius: var(--border-radius-md); font-size: var(--text-base); font-weight: var(--font-medium); border: none; display: inline-flex; align-items: center; justify-content: center; gap: var(--space-2); min-height: 40px; transition: all 0.15s ease; }
    .btn-primary { background: var(--color-primary); color: var(--color-text-inverse); }
    .btn-primary:hover { background: var(--color-primary-hover); }
    .btn-secondary { background: transparent; color: var(--color-primary); border: 1px solid var(--color-primary); }
    .btn-secondary:hover { background: var(--color-primary-light); }
    .btn-ghost { background: transparent; color: var(--color-text-secondary); padding: 10px 16px; }
    .btn-ghost:hover { color: var(--color-text-primary); background: var(--color-bg-hover); }
    .button-group--inline { display: flex; gap: var(--space-2); flex-wrap: wrap; }

    /* Input */
    .input-container { position: fixed; bottom: 0; left: 0; right: 0; background: var(--color-bg-page); border-top: 2px solid var(--color-border); padding: var(--space-4); box-shadow: var(--shadow-sm); z-index: 100; }
    .input-wrapper { max-width: var(--container-max-width); margin: 0 auto; position: relative; }
    .input-field { width: 100%; min-height: 44px; max-height: 120px; padding: 12px 48px 12px 16px; border: 2px solid var(--color-border); border-radius: var(--border-radius-full); font-size: var(--text-base); line-height: var(--leading-tight); font-family: var(--font-sans); resize: none; background: var(--color-bg-input); color: var(--color-text-primary); }
    .input-field:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px var(--color-primary-light); }
    .send-button { position: absolute; right: var(--space-2); bottom: var(--space-2); width: 32px; height: 32px; border-radius: 50%; background: var(--color-primary); color: var(--color-text-inverse); border: none; display: flex; align-items: center; justify-content: center; }
    .send-button:hover { background: var(--color-primary-hover); }
    .example-prompts { display: flex; gap: var(--space-2); margin-top: var(--space-2); overflow-x: auto; padding-bottom: var(--space-1); justify-content: center; }
    .example-prompt { padding: var(--space-2) var(--space-4); border-radius: var(--border-radius-md); background: var(--color-bg-surface); border: 2px solid var(--color-border); color: var(--color-text-secondary); font-size: var(--text-sm); white-space: nowrap; }
    .example-prompt:hover { background: var(--color-bg-hover); color: var(--color-text-primary); border-color: var(--color-border-strong); }

    /* Utilities */
    .skip-link { position: absolute; top: -40px; left: 0; background: var(--color-primary); color: var(--color-text-inverse); padding: var(--space-2) var(--space-4); text-decoration: none; z-index: 1000; }
    .skip-link:focus { top: 0; }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <div class="header-left">
        <button class="menu-toggle" id="menu-toggle" aria-label="Open menu">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <a href="#" class="library-logo" id="theme-toggle">
          <div class="library-logo-icon">📚</div>
          <div class="library-name">CCLS Library</div>
        </a>
      </div>
      <div class="header-actions">
        <button class="icon-button notification-badge" aria-label="Notifications">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Side Menu Overlay -->
  <div class="side-menu-overlay" id="menu-overlay"></div>

  <!-- Side Menu -->
  <nav class="side-menu" id="side-menu" aria-label="Main navigation">
    <div class="side-menu-header">
      <h2 class="side-menu-title">Menu</h2>
      <button class="side-menu-close" id="menu-close" aria-label="Close menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="side-menu-content">
      <div class="menu-section">
        <div class="menu-section-title">My Account</div>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">💳</span>
          <span class="menu-item-text">Digital Library Card</span>
        </a>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">📖</span>
          <span class="menu-item-text">Checkouts</span>
          <span class="menu-item-badge">3</span>
        </a>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">🔖</span>
          <span class="menu-item-text">Holds</span>
          <span class="menu-item-badge">2</span>
        </a>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">💰</span>
          <span class="menu-item-text">Fines Due</span>
        </a>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">📚</span>
          <span class="menu-item-text">Reading History</span>
        </a>
      </div>
      <div class="menu-divider"></div>
      <div class="menu-section">
        <div class="menu-section-title">Library Services</div>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">📅</span>
          <span class="menu-item-text">Events & Programs</span>
        </a>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">🎯</span>
          <span class="menu-item-text">Book a Study Room</span>
        </a>
        <a href="#" class="menu-item">
          <span class="menu-item-icon">❓</span>
          <span class="menu-item-text">Ask a Librarian</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- Main Chat -->
  <div class="app-container">
    <main id="main" class="chat-container">
      <div class="chat-messages">
        
        <div class="message message--assistant">
          <p>Hi! I'm here to help you discover books and manage your library account. What can I help you with today?</p>
        </div>

        <div class="message message--user">
          <p>I want a mystery set in Paris</p>
        </div>

        <div class="message message--assistant">
          <p>Great choice! I found several mysteries set in Paris. Here are some available now:</p>
          
          <div class="book-card">
            <div class="book-card-header">
              <div class="book-cover">🗼</div>
              <div class="book-info">
                <h3 class="book-title">Murder in the Marais</h3>
                <p class="book-author">Cara Black</p>
                <div class="book-formats">
                  <span class="badge badge--available">Available Now</span>
                  <span class="badge badge--format">📕 Print</span>
                  <span class="badge badge--format">🎧 Audiobook</span>
                </div>
              </div>
            </div>
            <p class="book-explanation">
              Perfect match! First in the Aimée Leduc series, featuring a private investigator solving crimes in the atmospheric neighborhoods of Paris.
            </p>
            <div class="book-actions">
              <button class="btn btn-primary">Place Hold</button>
              <button class="btn btn-secondary">See More in Series</button>
            </div>
          </div>

          <div class="book-card">
            <div class="book-card-header">
              <div class="book-cover">🥐</div>
              <div class="book-info">
                <h3 class="book-title">The Paris Apartment</h3>
                <p class="book-author">Lucy Foley</p>
                <div class="book-formats">
                  <span class="badge badge--waitlist">1-week wait</span>
                  <span class="badge badge--format">📕 Print</span>
                  <span class="badge badge--format">📱 eBook</span>
                </div>
              </div>
            </div>
            <p class="book-explanation">
              A locked-room mystery set in a charming Parisian apartment building with secrets behind every door.
            </p>
            <div class="book-actions">
              <button class="btn btn-primary">Join Waitlist</button>
              <button class="btn btn-ghost">Tell me more</button>
            </div>
          </div>
        </div>

      </div>
    </main>

    <!-- Input Area -->
    <div class="input-container">
      <div class="input-wrapper">
        <textarea 
          class="input-field" 
          placeholder="Ask me anything about books, your account, or library services..."
          rows="1"
          id="message-input"
        ></textarea>
        <button class="send-button" id="send-button" aria-label="Send message">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M14.5 1.5L7 9M14.5 1.5L10 14.5L7 9M14.5 1.5L1.5 6L7 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      <div class="example-prompts">
        <button class="example-prompt">"Show me cozy mysteries"</button>
        <button class="example-prompt">"What's new in sci-fi?"</button>
        <button class="example-prompt">"When are my books due?"</button>
      </div>
    </div>
  </div>

  <script>
    // Menu toggle
    const menuToggle = document.getElementById('menu-toggle');
    const menuClose = document.getElementById('menu-close');
    const menuOverlay = document.getElementById('menu-overlay');
    const sideMenu = document.getElementById('side-menu');

    function openMenu() {
      sideMenu.classList.add('active');
      menuOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      sideMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    menuToggle.addEventListener('click', openMenu);
    menuClose.addEventListener('click', closeMenu);
    menuOverlay.addEventListener('click', closeMenu);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && sideMenu.classList.contains('active')) {
        closeMenu();
      }
    });

    // Theme toggle via logo click
    const themeToggle = document.getElementById('theme-toggle');
    const html = document.documentElement;
    const themes = ['light', 'dark', 'ccls'];
    let currentThemeIndex = 2; // Start with CCLS

    themeToggle.addEventListener('click', (e) => {
      e.preventDefault();
      currentThemeIndex = (currentThemeIndex + 1) % themes.length;
      const newTheme = themes[currentThemeIndex];
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme') || 'ccls';
    currentThemeIndex = themes.indexOf(savedTheme);
    html.setAttribute('data-theme', savedTheme);

    // Auto-resize textarea
    const textarea = document.getElementById('message-input');
    textarea.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = Math.min(this.scrollHeight, 120) + 'px';
    });

    // Example prompt click
    document.querySelectorAll('.example-prompt').forEach(button => {
      button.addEventListener('click', () => {
        textarea.value = button.textContent.replace(/"/g, '');
        textarea.focus();
      });
    });

    // Send button
    const sendButton = document.getElementById('send-button');
    sendButton.addEventListener('click', () => {
      if (textarea.value.trim()) {
        console.log('Sending:', textarea.value);
        textarea.value = '';
        textarea.style.height = 'auto';
      }
    });

    textarea.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendButton.click();
      }
    });
  </script>
</body>
</html>