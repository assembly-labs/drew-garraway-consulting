@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply font-body text-charcoal bg-cream antialiased;
  }

  h1, h2, h3, h4 {
    @apply font-heading;
  }
}

@layer components {
  .container {
    @apply max-w-6xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-full font-medium transition-all duration-200;
  }

  .btn-primary {
    @apply bg-forest text-white hover:bg-forest/90;
  }

  .btn-secondary {
    @apply bg-earth text-white hover:bg-earth/90;
  }

  .btn-ghost {
    @apply border-2 border-forest text-forest bg-transparent hover:bg-forest/10;
  }

  .btn-outline {
    @apply border-2 border-charcoal text-charcoal bg-transparent hover:bg-charcoal/10;
  }

  .card {
    @apply block rounded-xl border border-charcoal/10 bg-white p-6 transition-all hover:shadow-lg no-underline;
  }

  .form-input {
    @apply w-full rounded-lg border border-charcoal/20 bg-white px-4 py-3 text-charcoal;
    @apply focus:border-forest focus:outline-none focus:ring-2 focus:ring-forest/20;
    @apply disabled:cursor-not-allowed disabled:bg-charcoal/5 disabled:opacity-50;
  }

  .form-label {
    @apply block text-sm font-medium text-charcoal mb-2;
  }

  .section-heading {
    @apply font-heading text-3xl md:text-4xl text-charcoal text-center;
  }

  .section-subheading {
    @apply text-lg text-charcoal/70 text-center max-w-2xl mx-auto;
  }
}

/* Skip link for accessibility */
.skip-link {
  @apply sr-only;
}

.skip-link:focus {
  @apply not-sr-only absolute left-4 top-4 z-50 rounded-lg bg-forest px-4 py-2 text-white outline-none;
}

/* Mobile nav overlay */
.nav-overlay {
  @apply fixed inset-0 bg-black/50 z-40 opacity-0 pointer-events-none transition-opacity;
}

.nav-overlay.active {
  @apply opacity-100 pointer-events-auto;
}

.mobile-nav {
  @apply fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white z-50 transform translate-x-full transition-transform;
  /* Safe area for notched devices */
  padding-bottom: env(safe-area-inset-bottom);
}

.mobile-nav.active {
  @apply translate-x-0;
}

/* Header scroll state */
.header-scrolled {
  @apply bg-cream/95 backdrop-blur shadow-sm;
}

.header-scrolled .header-logo,
.header-scrolled .header-link {
  @apply text-charcoal;
}

.header-scrolled .header-link:hover {
  @apply text-forest;
}

.header-scrolled #menu-toggle {
  @apply text-charcoal;
}

/* Video hero */
.hero-video {
  min-height: 100vh;
  min-height: 100svh;
  /* Safe area for notched devices */
  padding-top: env(safe-area-inset-top);
}

/* Video toggle - better positioning on mobile */
@media (max-width: 640px) {
  #video-toggle {
    bottom: calc(1rem + env(safe-area-inset-bottom, 0px));
    right: 1rem;
  }
}

/* Fallback background for video hero when video doesn't load */
.hero-video-fallback {
  @apply bg-gradient-to-br from-forest to-forest/80;
}

/* Testimonial carousel */
.testimonial-slides {
  position: relative;
  min-height: 200px;
}

/* Better touch targets for mobile carousel controls */
@media (max-width: 640px) {
  .testimonial-prev,
  .testimonial-next {
    min-width: 48px;
    min-height: 48px;
  }

  /* Larger tap area for dots while keeping visual size small */
  .testimonial-dots {
    gap: 0.75rem;
  }

  .testimonial-dot {
    padding: 0.5rem;
    margin: -0.5rem;
  }
}

.testimonial-slide {
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.testimonial-slide.active {
  display: block;
  opacity: 1;
}

/* Animations */
@keyframes bounce {
  0%, 100% {
    transform: translateY(-25%) translateX(-50%);
    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
  }
  50% {
    transform: translateY(0) translateX(-50%);
    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }
}

.animate-bounce {
  animation: bounce 1s infinite;
}

/* Safe area insets for modern devices */
@supports (padding: env(safe-area-inset-bottom)) {
  footer {
    padding-bottom: calc(3rem + env(safe-area-inset-bottom));
  }

  /* Fixed header safe area */
  header.fixed,
  header.sticky {
    padding-top: env(safe-area-inset-top);
  }
}

/* Improve text readability on small screens */
@media (max-width: 640px) {
  .section-heading {
    font-size: 1.75rem;
    line-height: 1.2;
  }

  .section-subheading {
    font-size: 1rem;
  }

  /* Better spacing for mobile forms */
  .form-input {
    font-size: 16px; /* Prevents iOS zoom on input focus */
  }

  /* Ensure buttons have adequate touch targets */
  .btn {
    min-height: 44px;
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  html {
    scroll-behavior: auto;
  }

  .animate-bounce {
    animation: none;
  }
}
